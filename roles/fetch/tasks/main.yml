---
- name: Fetch reports -  Pre and Post fix
  ansible.builtin.fetch:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    flat: true
  loop: "{{ fetch_loop_files_full }}"
  when: auto_fix and fixed

- name: Fetch reports - First Scan results and Autogenerated Ansible fixes
  ansible.builtin.fetch:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    flat: true
  loop: "{{ fetch_loop_files_ansible }}"
  when: autogenerate_ansible and not auto_fix

- name: Fetch Autogenerated Ansible fixes
  ansible.builtin.fetch:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
    flat: true
  loop: "{{ fetch_loop_files }}"

- name: End playbook execution for only post pourposes
  ansible.builtin.meta: end_play
  when: only_post
